geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 3),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
# Print the plot
print(plot)
# Plot
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 3),
axis.text.y = element_text(color = "white",  hjust = 1, margin = margin(r = 20)),
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
# Print the plot
print(plot)
# Plot
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 3),
axis.text.y = element_text(color = "white",  hjust = 1, margin = margin(r = 6)),
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
# Print the plot
print(plot)
# Plot
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 3),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
# Plot
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 3),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
# Print the plot
print(plot)
# Plot
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 4),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
# Print the plot
print(plot)
colors <- c("IBEX" = "seagreen2", "GDAXI" = "coral", "FCHI" = "mediumblue", "ATX" = "magenta1", "FTSE" = "yellow1", "BFX" = "deeppink")
european_stock <- test |>
filter(Simbolo %in% c("IBEX", "GDAXI", "FCHI","ATX", "FTSE", "BFX"))
limits_df <- european_stock %>%
group_by(Simbolo) %>%
summarize(ymin = min(Ultimo_precio),
ymax = max(Ultimo_precio))
european_stock <- merge(european_stock, limits_df, by = "Simbolo")
plot <-
ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white"),
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text = element_text(color = "white"),
axis.title = element_text(color = "white"),
strip.background =  element_blank(),
strip.text.x = element_text(size = 8, color = "white", face = "bold.italic")
) +
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color=FALSE, fill=FALSE) +
scale_color_manual(values = colors)
print(plot)
options(repr.plot.width = 20, repr.plot.height = 10)
# Print the plot
print(plot)
library(ggplotly)
library(gplotly)
library(plotly)
ggplotly(plot, tooltip=c("Ultimo_precio"))
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 4),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
# Print the plot
print(plot)
options(repr.plot.width = 20, repr.plot.height = 10)
# Print the plot
print(plot)
library(plotly)
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 4),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
# Print the plot
print(plot)
options(repr.plot.width = 40, repr.plot.height = 10)
# Print the plot
print(plot)
library(plotly)
ggplotly(plot, tooltip=c("Ultimo_precio"))
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text_repel(aes(label = round(Ultimo_precio, 1)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 4),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
library(ggrepel)
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text_repel(aes(label = round(Ultimo_precio, 1)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 4),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
print(plot)
```{r, echo=TRUE, fig.align='center', fig.width=15, fig.height=10}
library(ggrepel)
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text_repel(aes(label = round(Ultimo_precio, 1)), size = 3, vjust = -2.2) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 4),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 20)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
print(plot)
options(repr.plot.width = 40, repr.plot.height = 10)
# Print the plot
print(plot)
library(knitr)
# Convert top_companies_bel dataframe into a nice table
top_companies_bel_table <- kable(top_companies_bel, caption = "Top 5 Companies in Belgium", format = "html", align = "c")
top_companies_bel <- data_dax %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5)
csv_bel <- list.files(pattern = "^bel.*\\.csv$", full.names = TRUE)
list_bel<- lapply(csv_bel, read_csv)
data_bel<- do.call(rbind, list_bel)
top_companies_bel <- data_bel %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5)
library(knitr)
# Convert top_companies_bel dataframe into a nice table
top_companies_bel_table <- kable(top_companies_bel, caption = "Top 5 Companies in Belgium", format = "html", align = "c")
# Print the table
print(top_companies_bel_table)
```{r setup, collapse=TRUE}
library(scrapex)
library(plotly)
ggplotly(plot, tooltip=c("Ultimo_precio"))
library(plotly)
ggplotly(plot, tooltip=c("Ultimo_precio"))
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text_repel(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2, segment.size = 0, segment.color = NA) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 4),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 15)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
library(plotly)
ggplotly(plot, tooltip=c("Ultimo_precio"))
install.packages("knitr")
install.packages("knitr")
install.packages("knitr")
library(knitr)
install.packages("rmarkdown")
library(rmarkdown)
library(rmarkdown)
library(knitr)
library(scrapex)
library(rvest)
library(httr)
library(dplyr)
library(tidyr)
library(stringr)
library(ggplot2)
library(tools)
library(taskscheduleR)
library(stringr)
library(readr)
library(ggpubr)
colors <- c("IBEX" = "seagreen2", "GDAXI" = "coral", "FCHI" = "mediumblue", "ATX" = "magenta1", "FTSE" = "yellow1", "BFX" = "deeppink")
european_stock <- test |>
filter(Simbolo %in% c("IBEX", "GDAXI", "FCHI","ATX", "FTSE", "BFX"))
limits_df <- european_stock %>%
group_by(Simbolo) %>%
summarize(ymin = min(Ultimo_precio),
ymax = max(Ultimo_precio))
european_stock <- merge(european_stock, limits_df, by = "Simbolo")
library(ggrepel)
# Plot
plot <- ggplot(european_stock, aes(x = Date, y = Ultimo_precio, color = Simbolo, group = Simbolo)) +
geom_point(size = 2) +
geom_line(size = 1, aes(color = Simbolo))  +
facet_wrap(~ Simbolo, scales = "free_y") +
geom_text_repel(aes(label = round(Ultimo_precio, 2)), size = 3, vjust = -2.2, segment.size = 0, segment.color = NA) +
labs(x = NULL, y = "Last Price", title = "European Index Evolution") +
theme(
panel.background = element_rect(fill = "black"),
plot.background = element_rect(fill = "black"),
plot.title = element_text(color = "white", margin = margin(b = 30)),  # Move the title upwards
panel.grid.major.y = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.major.x = element_blank(),
panel.grid.minor.x = element_blank(),
axis.text.x = element_text(color = "white", angle = 45, hjust = 1, size = 6),
axis.text.y = element_text(color = "white",  hjust = 1),
axis.title.y = element_text(color = "white", size = 8, margin = margin(r = 12)),  # Move the y-axis title to the left
strip.background = element_blank(),
strip.text.x = element_text(size = 9, color = "white", face = "bold"),
plot.margin = margin(10, 18, 10, 15)) +  #top, right, bottom, left
geom_blank(aes(y = ymin, ymax = ymax)) +
guides(color = FALSE, fill = FALSE) +
scale_color_manual(values = colors)
print(plot)
library(plotly)
ggplotly(plot, tooltip=c("Ultimo_precio"))
# Convert top_companies_bel dataframe into a nice table
top_companies_bel_table <- kable(top_companies_bel, caption = "Top 5 Companies in Belgium", align = "c")
# Print the table
print(top_companies_bel_table)
# Convert top_companies_bel dataframe into a nice table
top_companies_bel_table <- kable(top_companies_bel, caption = "Top 5 Companies in Belgium", align = "c")
# Print the table
print(top_companies_bel_table)
top_companies_bel <- data_bel %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5)
library(knitr)
# Convert top_companies_bel dataframe into a nice table
top_companies_bel_table <- kable(top_companies_bel, caption = "Top 5 Companies in Belgium", align = "c")
# Print the table
print(top_companies_bel_table)
top_companies_bel <- data_bel %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5) %>%
kable()
top_companies_bel <- data_bel %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5) %>%
top_companies_bel_table <- kable(top_companies_bel, caption = "Top 5 Companies in Belgium", align = "c")
top_companies_bel <- data_bel %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5)
top_companies_bel_table <- kable(top_companies_bel, caption = "Top 5 Companies in Belgium", align = "c")
# Print the table
print(top_companies_bel_table)
top_companies_ibex$Market <- "IBEX"
top_companies_ibex$Market <- "IBEX"
top_companies_ibex <- data_ibex %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5)
csv_ibex <- list.files(pattern = "^ibex.*\\.csv$", full.names = TRUE)
list_ibex <- lapply(csv_ibex, read_csv)
data_ibex<- do.call(rbind, list_ibex)
data_ibex <- data_ibex %>%
mutate(ultimo = replace(data_ibex$ultimo, TRUE, gsub(",", ".", data_ibex$ultimo)),
ultimo = as.numeric(ultimo))
top_companies_ibex <- data_ibex %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5)
colnames(top_companies_ibex) <- c("Company", "Last Price")
knitr::kable(top_companies_ibex, caption = "Top 5 Companies in Spain", align = "c")
top_companies_ibex <- data_ibex %>%
group_by(Nombre) %>%
summarise(average_price = mean(ultimo, na.rm = TRUE)) %>%
arrange(desc(average_price)) %>%
head(5)
colnames(top_companies_ibex) <- c("Company", "Last Price")
knitr::kable(top_companies_ibex, caption = "Top 5 Companies in Spain", align = "c")
top_companies_ibex$Market <- "IBEX"
top_companies_bel$Market <- "BEL"
top_companies_cac$Market <- "CAC"
